{
    # Global Caddy configuration
    email admin@example.com
    
    # Default log configuration
    log {
        output file /data/logs/access.log {
            roll_size 10MB
            roll_keep 5
            roll_keep_for 720h
        }
    }
}

# Simple localhost configuration for testing
localhost:443 {
    tls internal
    
    # Proxy the admin panel
    handle /BXv8SI7gBe/* {
        reverse_proxy 3x-ui:2053
    }
    
    # Proxy everything else
    handle {
        reverse_proxy 3x-ui:443 {
            transport http {
                tls
                tls_insecure_skip_verify
            }
        }
    }
    
    log {
        output file /data/logs/localhost.log
    }
}